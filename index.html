<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Steve's Macro Meal Planner</title>
<meta name="description" content="ADHD-optimized macro meal planner with food dropdowns, dynamic math, fat-per-meal badges, and daily targets.">
<style>
  /* ====== THEME ====== */
  :root{
    --bg:#111827;--panel:#1f2937;--panel-2:#0f172a;--ink:#ffffff;--muted:#9ca3af;
    --border:#374151;--accent:#60a5fa;--ok:#4ade80;--warn:#f59e0b;--bad:#ef4444;
    --train:#facc15;--rest:#34d399;--busy:#60a5fa;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{width:100%;height:100vh;overflow:hidden}
  body{
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;
    background:var(--bg);color:var(--ink);padding:8px;
    display:flex;flex-direction:column;
  }
  .container{
    flex:1;
    max-width:100%;
    display:flex;
    flex-direction:column;
    overflow:hidden;
  }
  .title{font-weight:800;text-align:center;margin:.15rem 0 .5rem;font-size:1.1rem}

  /* ====== TOOLBAR ====== */
  .toolbar{
    display:flex;gap:.5rem;flex-wrap:wrap;align-items:center;justify-content:space-between;
    padding:.4rem;border:1px solid var(--border);border-radius:.5rem;
    background:var(--panel);margin-bottom:8px;
  }
  .toolbar .group{display:flex;gap:.4rem;align-items:center}
  .btn{padding:.35rem .6rem;border:1px solid var(--border);background:var(--panel);color:#fff;border-radius:.4rem;cursor:pointer;font-size:.85rem}
  .btn.primary{background:#3b82f6;border-color:#2563eb}
  .btn.ghost{background:transparent}
  .btn.danger{background:#ef4444;border-color:#dc2626}
  .pill{padding:.2rem .5rem;border-radius:999px;font-weight:700;font-size:.8rem}
  .pill.train{background:rgba(250,204,21,.15);border:1px solid #a16207;color:var(--train)}
  .pill.rest{background:rgba(52,211,153,.15);border:1px solid #047857;color:var(--rest)}
  .pill.busy{background:rgba(96,165,250,.15);border:1px solid #1d4ed8;color:var(--busy)}
  label.small{color:var(--muted);font-size:.8rem}

  /* ====== GRID LAYOUT ====== */
  .grid{
    display:grid;
    grid-template-columns:1fr 1fr 280px;
    gap:10px;
    flex:1;
    overflow:hidden;
  }
  .meals{
    grid-column:1 / span 2;
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:10px;
    overflow-y:auto;
    padding-right:4px;
  }

  /* ====== CARDS / ROWS ====== */
  .card{background:var(--panel);border:1px solid var(--border);border-radius:.5rem;padding:10px;height:fit-content}
  .card h3{font-size:.95rem;font-weight:800;margin-bottom:6px;display:flex;align-items:center;gap:.4rem}
  .rows{display:grid;gap:6px}
  .row{display:grid;grid-template-columns:minmax(180px,1fr) auto 1fr 36px; gap:6px; align-items:center}
  .row > *{min-width:0}
  .remove{justify-self:end;padding:.25rem .4rem;font-size:.9rem}
  .sub{color:var(--muted);font-size:.75rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .chip{font-weight:600;padding:.15rem .4rem;border-radius:.3rem;font-size:.75rem}
  .chip.ok{background:rgba(74,222,128,.12);color:var(--ok);border:1px solid #16a34a}
  .chip.warn{background:rgba(245,158,11,.12);color:var(--warn);border:1px solid #b45309}
  .chip.bad{background:rgba(239,68,68,.12);color:var(--bad);border:1px solid #b91c1c}
  .add-row{margin-top:4px;font-size:.8rem}
  .fat-note{font-size:.75rem;color:var(--muted)}
  .fat-note b{color:#fff}

  /* Searchable picker + stepper */
  .picker{display:flex;gap:4px;align-items:center}
  .picker input[type="text"]{flex:1 1 auto;background:#fff;color:#111;border:1px solid #d1d5db;border-radius:.3rem;padding:.35rem;font-size:.8rem}
  .stepper{display:flex;align-items:center;gap:4px}
  .stepper input{width:60px;text-align:center;background:#fff;color:#111;border:1px solid #d1d5db;border-radius:.3rem;padding:.3rem;font-size:.8rem}
  .stepper .u{color:var(--muted);font-size:.75rem}
  .stepper .pm{width:26px;height:26px;border-radius:.3rem;border:1px solid var(--border);background:var(--panel-2);color:#fff;cursor:pointer;font-size:.8rem}

  select, input[type="number"]{background:#fff;color:#111;border:1px solid #d1d5db;border-radius:.3rem;padding:.35rem;font-size:.8rem}
  select:focus,input:focus, .picker input[type="text"]:focus{outline:none;box-shadow:0 0 0 2px var(--accent)}

  /* ====== SIDEBAR ====== */
  .sidebar{
    display:grid;
    gap:10px;
    height:100%;
    overflow-y:auto;
  }
  .panel{background:var(--panel);border:1px solid var(--border);border-radius:.5rem;padding:10px}
  .totals h4{font-weight:800;m
